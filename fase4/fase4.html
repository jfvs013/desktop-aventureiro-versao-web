<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Fase 4 ‚Äî Manchetes Suspeitas</title>

    <style>
        :root {
            --bg-color: #0a0e27;
            --card-bg: rgba(26, 31, 58, 0.95);
            --primary: #00d4ff;
            --success: #2ecc71;
            --danger: #ff5c5c;
            --warning: #ff6b35;
            --text: #f8fafc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a0a2e 50%, #16213e 100%);
            color: var(--text);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Fundo Animado do Tutorial */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(0, 212, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: gridMove 20s linear infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes gridMove {
            0% {
                transform: translateY(0);
            }

            100% {
                transform: translateY(40px);
            }
        }

        /* Topbar */
        .game-topbar {
            position: relative;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: rgba(10, 14, 39, 0.8);
            border-bottom: 2px solid rgba(0, 212, 255, 0.3);
        }

        .player-info {
            display: flex;
            gap: 20px;
            font-weight: bold;
            color: var(--primary);
        }

        #timer {
            font-size: 1.5rem;
            background: rgba(0, 0, 0, 0.4);
            padding: 5px 20px;
            border-radius: 10px;
            border: 1px solid var(--primary);
        }

        /* Game Area */
        .game-area {
            position: relative;
            z-index: 1;
            display: grid;
            grid-template-columns: 280px 1fr 350px;
            gap: 20px;
            padding: 20px;
            height: calc(100vh - 85px);
        }

        /* Drop Zones */
        .drop-column {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .drop-zone {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 3px dashed rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: all 0.3s;
            padding: 20px;
        }

        .drop-zone.over {
            transform: scale(1.02);
            background: rgba(0, 212, 255, 0.1);
        }

        .drop-zone.verdadeira {
            border-color: var(--success);
            color: var(--success);
        }

        .drop-zone.falsa {
            border-color: var(--danger);
            color: var(--danger);
        }

        /* News Cards */
        .news-column {
            background: var(--card-bg);
            border-radius: 24px;
            padding: 30px;
            border: 1px solid rgba(0, 212, 255, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .headline-card {
            background: white;
            color: #1a1f3a;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            cursor: grab;
            width: 100%;
            max-width: 450px;
            margin-top: 30px;
            border-left: 10px solid #cbd5e1;
            animation: fadeInScale 0.5s ease;
        }

        @keyframes fadeInScale {
            0% {
                opacity: 0;
                transform: scale(0.9);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .source-details {
            margin-top: 15px;
            padding: 12px;
            background: #f1f5f9;
            border-radius: 8px;
            font-size: 0.9rem;
            display: none;
            color: #475569;
            border: 1px solid #00d4ff;
        }

        /* Mascote e Di√°logo (Estilo Tutorial) */
        .mascot-side {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .mascot-container {
            position: relative;
            text-align: center;
        }

        #tutorial-mascot {
            width: 150px;
            filter: drop-shadow(0 10px 20px rgba(0, 212, 255, 0.3));
            animation: mascotFloat 3s ease-in-out infinite;
        }

        @keyframes mascotFloat {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .mascot-speaking #tutorial-mascot {
            animation: mascotTalk 0.4s ease infinite;
        }

        .mascot-celebrating #tutorial-mascot {
            animation: mascotJump 0.6s ease;
        }

        @keyframes mascotTalk {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        @keyframes mascotJump {

            0%,
            100% {
                transform: scale(1) translateY(0);
            }

            50% {
                transform: scale(1.1, 0.9) translateY(-15px);
            }
        }

        .dialogue-box {
            background: rgba(42, 49, 80, 0.9);
            border: 2px solid var(--primary);
            border-radius: 16px;
            padding: 20px;
            position: relative;
            font-size: 0.95rem;
            line-height: 1.5;
            min-height: 100px;
        }

        .dialogue-box::after {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 15px solid var(--primary);
        }

        /* Bot√µes */
        .btn {
            padding: 12px 20px;
            border-radius: 10px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00d4ff, #00a8cc);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 107, 53, 0.2);
            color: #ff6b35;
            border: 2px solid #ff6b35;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3);
        }

        /* Modal */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .hidden {
            display: none;
        }

        .modal-inner {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 24px;
            border: 2px solid var(--primary);
            text-align: center;
            max-width: 500px;
        }
    </style>
</head>

<body>
    <div class="game-topbar">
        <div class="player-info">
            <div id="playerDisplay">Jogador: ‚Äî</div>
            <div id="scoreDisplay">Pontos: 0</div>
        </div>
        <div id="timer">Tempo: 60</div>
    </div>

    <main class="game-area">
        <section class="drop-column">
            <div id="verdadeira" class="drop-zone verdadeira">
                <span style="font-size: 4rem;">‚úÖ</span>
                <h3>NOT√çCIA REAL</h3>
                <p>Arraste para c√° se for confi√°vel</p>
            </div>
        </section>

        <section class="news-column">
            <h2 style="color: var(--primary); margin-bottom: 10px;">üì∞ Analise a Manchete</h2>
            <div id="headlineContainer" style="width: 100%; display: flex; justify-content: center;"></div>

            <div style="margin-top: auto; width: 100%; display: flex; flex-direction: column; gap: 10px;">
                <button id="inspectBtn" class="btn btn-secondary">üîç Usar Lupa de Verifica√ß√£o (-1s)</button>
            </div>
        </section>

        <aside class="mascot-side">
            <div class="mascot-container" id="mascot-wrapper">
                <img src="../assets/mascote.png.png" alt="Mascote" id="tutorial-mascot"
                    onerror="this.src='https://cdn-icons-png.flaticon.com/512/616/616408.png'">
            </div>

            <div class="dialogue-box" id="feedbackBox">
                Ol√°! Sou o <strong>C√£ozinho Azul</strong>. Arraste as not√≠cias para os lados para classific√°-las!
            </div>

            <div id="fakeZone" class="drop-zone falsa">
                <span style="font-size: 4rem;">üö´</span>
                <h3>FAKE NEWS</h3>
                <p>Arraste para c√° se for suspeita</p>
            </div>
        </aside>
    </main>

    <div id="endModal" class="modal hidden">
        <div class="modal-inner">
            <h2 id="endTitle" style="color: var(--primary); margin-bottom: 20px;">Miss√£o Conclu√≠da!</h2>
            <div id="endText" style="margin-bottom: 30px; line-height: 1.6;"></div>
            <div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center;">
                <button onclick="window.location.href='/../fase5/fase5.html'" class="btn btn-success">Pr√≥xima Fase
                    ‚û°Ô∏è</button>
                <button onclick="location.reload()" class="btn btn-primary">Tentar Novamente</button>
                <button id="backBtn" class="btn btn-secondary">Voltar ao In√≠cio</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const headlinesData = [
                { id: 1, isFake: false, title: "Nova vacina contra a gripe come√ßa a ser distribu√≠da em postos de sa√∫de.", source: "Portal Nacional de Sa√∫de", date: "12/01/2026", reputation: "Alta - √ìrg√£o Oficial", detail: "Confirmado por secretarias de sa√∫de.", edu: "Fontes .gov s√£o muito confi√°veis!" },
                { id: 2, isFake: true, title: "URGENTE: Comer chocolate cura todas as doen√ßas em 24 horas!", source: "Not√≠ciasIncr√≠veis.xyz", date: "Hoje", reputation: "Desconhecida", detail: "Nenhum hospital confirmou isso.", edu: "Cuidado com 'curas milagrosas'!" },
                { id: 3, isFake: false, title: "NASA confirma nova miss√£o para estudar Marte em 2028.", source: "Ag√™ncia Espacial", date: "10/01/2026", reputation: "Alta", detail: "Projeto aprovado internacionalmente.", edu: "Not√≠cias cient√≠ficas usam fontes oficiais." },
                { id: 4, isFake: true, title: "CUIDADO! O governo vai cancelar a internet de quem n√£o compartilhar isso!", source: "WhatsApp Repassado", date: "Agora", reputation: "Nula", detail: "Texto com amea√ßas e erros de portugu√™s.", edu: "Mensagens de 'compartilhe ou perca algo' s√£o fakes!" },
                { id: 5, isFake: true, title: "Fruta secreta emagrece 10kg por dia sem exerc√≠cios!", source: "DicasSaudeTop.com", date: "05/01/2026", reputation: "Baixa", detail: "Usa t√≠tulos exagerados para atrair cliques.", edu: "O Clickbait tenta te enganar pela curiosidade." }
            ];

            let score = 0, timeLeft = 60, totalCorrect = 0, totalAnswered = 0, activeHeadline = null, timerInterval;

            const container = document.getElementById('headlineContainer');
            const feedbackBox = document.getElementById('feedbackBox');
            const mascotWrapper = document.getElementById('mascot-wrapper');
            const inspectBtn = document.getElementById('inspectBtn');

            // Iniciar
            shuffleArray(headlinesData);
            renderNextHeadline();
            startTimer();
            const player = localStorage.getItem('da_player') || 'Aventureiro';
            document.getElementById('playerDisplay').textContent = `Jogador: ${player}`;

            function startTimer() {
                timerInterval = setInterval(() => {
                    timeLeft--;
                    document.getElementById('timer').textContent = `Tempo: ${timeLeft}`;
                    if (timeLeft <= 0) finishGame();
                }, 1000);
            }

            function renderNextHeadline() {
                container.innerHTML = '';
                if (headlinesData.length === 0) { finishGame(); return; }

                activeHeadline = headlinesData.shift();
                const card = document.createElement('div');
                card.className = 'headline-card';
                card.draggable = true;
                card.innerHTML = `
                    <small style="color: #64748b; font-weight: bold;">FONTE: ???</small>
                    <h2 style="margin-top: 10px; font-size: 1.3rem;">${activeHeadline.title}</h2>
                    <div id="details-${activeHeadline.id}" class="source-details">
                        <strong>üîç An√°lise da Fonte:</strong><br>
                        Origem: ${activeHeadline.source}<br>
                        Reputa√ß√£o: ${activeHeadline.reputation}<br>
                        <em>${activeHeadline.detail}</em>
                    </div>
                `;

                card.addEventListener('dragstart', e => {
                    card.classList.add('dragging');
                    e.dataTransfer.setData('text/plain', activeHeadline.id);
                });
                card.addEventListener('dragend', () => card.classList.remove('dragging'));
                container.appendChild(card);
                inspectBtn.disabled = false;
            }

            function setupDropZone(id, isFakeZone) {
                const zone = document.getElementById(id);
                zone.addEventListener('dragover', e => { e.preventDefault(); zone.classList.add('over'); });
                zone.addEventListener('dragleave', () => zone.classList.remove('over'));
                zone.addEventListener('drop', e => {
                    e.preventDefault();
                    zone.classList.remove('over');
                    processChoice(isFakeZone);
                });
            }

            setupDropZone('verdadeira', false);
            setupDropZone('fakeZone', true);

            function processChoice(choseFake) {
                totalAnswered++;
                const isCorrect = (activeHeadline.isFake === choseFake);

                if (isCorrect) {
                    score += activeHeadline.checked ? 130 : 100;
                    totalCorrect++;
                    updateMascote('celebrating', `<strong>Incr√≠vel!</strong> ${activeHeadline.edu}`);
                } else {
                    score = Math.max(0, score - 50);
                    updateMascote('speaking', `<strong>Opa!</strong> ${activeHeadline.edu}`);
                }

                document.getElementById('scoreDisplay').textContent = `Pontos: ${score}`;
                renderNextHeadline();
            }

            inspectBtn.addEventListener('click', () => {
                if (!activeHeadline) return;
                document.getElementById(`details-${activeHeadline.id}`).style.display = 'block';
                activeHeadline.checked = true;
                timeLeft -= 1;
                inspectBtn.disabled = true;
                updateMascote('speaking', "Analisando a fonte com cuidado... pronto!");
            });

            function updateMascote(animation, text) {
                feedbackBox.innerHTML = text;
                mascotWrapper.className = `mascot-container mascot-${animation}`;
                setTimeout(() => mascotWrapper.className = 'mascot-container', 2000);
            }

            function finishGame() {
                clearInterval(timerInterval);
                const accuracy = Math.round((totalCorrect / (totalAnswered || 1)) * 100);
                document.getElementById('endText').innerHTML = `
                    <p>Sua pontua√ß√£o final foi: <strong>${score}</strong></p>
                    <p>Precis√£o de an√°lise: <strong>${accuracy}%</strong></p>
                    <p>${accuracy >= 80 ? "üê∂ Voc√™ √© um verdadeiro detetive digital!" : "üê∂ Continue praticando para n√£o cair em fakes!"}</p>
                `;
                document.getElementById('endModal').classList.remove('hidden');
            }

            function shuffleArray(a) {
                for (let i = a.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [a[i], a[j]] = [a[j], a[i]];
                }
            }

            document.getElementById('backBtn').addEventListener('click', () => window.location.href = '../index.html');
        });
    </script>
</body>

</html>